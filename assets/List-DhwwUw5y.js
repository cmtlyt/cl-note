var $=Object.freeze,N=Object.defineProperty;var d=(n,t)=>$(N(n,"raw",{value:$(t||n.slice())}));import{aa as w,a9 as e,ac as l,ad as S,af as M,ag as W,ah as D,ai as p,aj as y,a2 as L}from"./index-DDVtgS7K.js";import{C as A}from"./Card-BFdIQvKO.js";import{r as b,n as B,S as E,E as x,G as v,H as F,q as k,I as T}from"./react-vendor-Cc9n1L3I.js";import"./__commonjsHelpers__-Cpj98o6Y.js";var C;const G=w.div(C||(C=d(["\n  box-shadow: 0 0 0 0.1rem #e5e5e5;\n"])));function Y(n){return e(G,{"un-p":"x-[0.75em]","un-text":"[0.8em]","un-rounded":"full",...n})}const q=A;function H(n){const{note:t,onClick:r,...i}=n;return l(q,{"un-flex":"~ col","un-p":"[1rem]",onClick:()=>r==null?void 0:r(t.id),...i,children:[l("div",{"un-flex":"~ items-center","un-w":"full",children:[t.icon&&e(S,{name:t.icon,"un-size":"$big-icon-size","un-flex-shrink":"0","un-m":"r-[0.5em]"}),e("div",{"un-flex":"1","un-line-clamp":"1","un-m":"r-[0.5em]","un-text":"[2rem]","un-line-height":"none",children:t.title}),e(Y,{"un-color":"$detail-text-color","un-flex-shrink":"0",children:t.date})]}),t.content&&e("div",{"un-line-clamp":"2","un-text":"[1.4rem]","un-color":"$detail-text-color","un-line-height":"none","un-m":"t-[0.5em]",children:t.content})]})}function R(n){const{notes:t,onClick:r,...i}=n;return e("div",{"un-w":"full","un-flex":"~ col","un-p":"x-[1rem]",...i,children:t.map(a=>e(H,{note:a,"un-m":"b-[1rem]",onClick:r},a.id))})}function h(n){const{amount:t,showSign:r=!0,decimal:i=2,...a}=n,u=t<0?"-":"+";return l("div",{"un-flex":"~ items-center","un-flex-shrink":"0",...a,children:[r&&e("span",{"un-m":"r-[0.25rem]",children:u}),e("span",{children:M(Math.abs(t),i)})]})}function _(n){const{label:t,value:r,onClick:i,...a}=n;return e("div",{onClick:()=>i==null?void 0:i(r),"un-line-height":"none","un-w":"full",...a,children:t})}var I,O;const J=w(A)(O||(O=d(["\n  background-color: #fff8;\n  ","\n"])),n=>W(I||(I=d(["\n    --count: ",";\n  "])),n.$count));function j(n){const{placeholder:t,options:r,children:i,onChange:a,...u}=n,o=b.useMemo(()=>[...t?[t]:[],...r||[]],[r,t]),[m,s]=b.useState({value:(o==null?void 0:o[0].value)||"",label:(o==null?void 0:o[0].label)||""}),z=b.useCallback(c=>{s(c),a==null||a(c.value)},[a]);return l("div",{"un-relative":"~",className:"group",children:[l("label",{children:[l("div",{...u,children:[e("span",{children:m.label}),i]}),e("input",{type:"input","un-hidden-with-position":"~",readOnly:!0})]}),e(J,{$count:o.length,"un-absolute":"~","un-top":"full","un-grid":"~  rows-[repeat(var(--count),0fr)]","un-overflow":"hidden","un-transition":"duration-200 property-[grid-template-rows]","un-color":"transparent","un-group-focus-within":"color-inherit rows-[repeat(var(--count),1fr)] [&>*]:p-y-[0.5em]","un-w":"max","un-backdrop-blur":"[0.5rem]","un-z":"1",children:o.map(c=>e(_,{...c,"un-min-h":"0","un-p":"x-[1em]","un-transition":"all duration-200",onClick:()=>z(c)},c.value))})]})}const K=new D({outputAmount:0,inputAmount:0,year:new Date().getFullYear(),month:0}),f=B(()=>K),Q=p(f,"outputAmount"),U=p(f,"inputAmount"),V=p(f,"year"),X=p(f,"month");var P;const Z=w.div(P||(P=d(["\n  box-shadow: 0.2rem 0.2rem 1rem -0.8rem var(--shadow-color);\n"])));function g(n){const{children:t,...r}=n;return e(F,{children:e("span",{"un-text":"[1.4rem]",...r,children:t})})}function ee(){const n=k(V),t=k(X);return l(x,{"un-flex":"~ col justify-between items-start",children:[e(g,{children:e(j,{onChange:r=>n(Number(r)),placeholder:{label:"2024年",value:"2024"},options:[{label:"2023年",value:"2023"},{label:"2022年",value:"2022"}]})}),e(v,{"un-line-height":"[3.6rem]","un-h":"[3.6rem]","un-w":"full",children:e(j,{"un-flex":"~ items-center justify-between","un-text":"[2.4rem]","un-w":"[7rem]","un-whitespace":"nowrap",placeholder:{label:"全年",value:"0"},options:[{label:"1月",value:"1"},{label:"2月",value:"2"},{label:"3月",value:"3"},{label:"4月",value:"4"},{label:"5月",value:"5"},{label:"6月",value:"6"},{label:"7月",value:"7"},{label:"8月",value:"8"},{label:"9月",value:"9"},{label:"10月",value:"10"},{label:"11月",value:"11"},{label:"12月",value:"12"}],onChange:r=>t(Number(r)),children:e(S,{name:"arrow-bottom","un-size":"[1.2rem]","un-color":"$detail-text-color"})})})]})}function ne(){return l(Z,{"un-flex":"~ items-end","un-bg":"white","un-p":"x-[2rem] y-[2rem]","un-m":"b-[1rem]",children:[e(ee,{}),e("div",{"un-h":"[3rem]","un-w":"[0.1rem]","un-bg":"$detail-color","un-rounded":"full","un-m":"x-[2rem]"}),l(E,{"un-flex":"[3]",children:[l(x,{children:[e(g,{children:"本月支出"}),e(v,{"un-h":"[3.6rem]","un-flex":"~ items-center","un-color":"$danger-color","un-line-height":"[3.6rem]",children:e(h,{amount:y(Q),showSign:!1,"un-font":"bold","un-text":"[2.8rem]"})})]}),l(x,{children:[e(g,{children:"本月收入"}),e(v,{"un-h":"[3.6rem]","un-flex":"~ items-center","un-color":"$success-color","un-line-height":"[3.6rem]",children:e(h,{amount:y(U),showSign:!1,"un-font":"bold","un-text":"[2.8rem]"})})]})]})]})}const te=A;function re(n){const{amountInfo:{id:t,title:r,amount:i,icon:a},onClick:u,...o}=n;return l(te,{onClick:()=>u==null?void 0:u(t),"un-flex":"~ items-center","un-w":"full","un-p":"[1rem]",...o,children:[e(S,{name:a,"un-size":"$big-icon-size","un-flex-shrink":"0","un-m":"r-[0.5rem]"}),e("span",{"un-flex":"1","un-line-clamp":"1",children:r}),e(h,{amount:i,"un-m":"l-[0.5rem]"})]})}function oe(n){const{date:t,amountList:r}=n,i=r.reduce((u,o)=>o.amount>0?u+o.amount:u,0),a=r.reduce((u,o)=>o.amount<0?u-o.amount:u,0);return l("div",{"un-flex":"~ items-center justify-between","un-m":"b-[1rem] t-[1rem]","un-text":"[1.4rem]",children:[e("span",{children:t}),l("div",{"un-flex":"~ items-center","un-color":"$detail-text-color",children:[!!i&&l("div",{"un-m":"x-[0.5rem]","un-flex":"~ items-center",children:[e("span",{"un-m":"r-[0.5rem]",children:"收入:"}),e(h,{amount:i,showSign:!1})]}),!!a&&l("div",{"un-m":"x-[0.5rem]","un-flex":"~ items-center",children:[e("span",{"un-m":"r-[0.5rem]",children:"支出:"}),e(h,{amount:a,showSign:!1})]})]})]})}function ue(n){const{amounts:t,onClick:r,...i}=n,a=t.reduce((u,o)=>{const s=L(o.date).format("MM月DD日 dddd").toString();return u[s]||(u[s]=[]),u[s].push(o),u},{});return e("div",{"un-flex":"~ col","un-w":"full","un-p":"x-[1rem]",...i,children:Object.entries(a).map(([u,o])=>l(T.Fragment,{children:[e(oe,{date:u,amountList:o}),o.map(m=>e(re,{amountInfo:m,onClick:r,"un-m":"b-[1rem]"},m.id))]},u))})}function se(){return l("div",{"un-h":"full","un-flex":"~ col",children:[e(ne,{}),l("div",{"un-overflow":"y-auto",children:[e(ue,{amounts:[{id:"1",amount:123,date:"2023-12-25",icon:"user",title:"123123123123123123123123123123123123123123123123"},{id:"2",amount:123123,date:"2023-12-25",icon:"react",title:"123123"},{id:"3",amount:-123,date:"2023-12-25",icon:"react",title:"123123"},{id:"4",amount:-123123,date:"2023-12-25",icon:"react",title:"123123"},{id:"5",amount:123123.123,date:"2023-12-25",icon:"react",title:"123123"},{id:"6",amount:-123123.123,date:"2024-6-20",icon:"react",title:"123123"}],onClick:n=>console.log(n)}),e(R,{notes:[{id:"1",title:"123123123123123123123123123123123123123123123123",content:"123123123123123123123123123123123123123123123123123123123123123123123123123123123123123123123123",date:"123",icon:"react"},{id:"2",title:"123123123123123123123123123123123123123123123123",content:"123123123123123123123123123123123123123123123123123123123123123123123123123123123123123123123123",date:"123",icon:"user"},{id:"3",title:"123123123123123123123123123123123123123123123123",date:"2023-12-25",icon:"user"},{id:"4",title:"123123123123123123123123123123123123123123123123",date:"2023-12-25"},{id:"5",title:"12312312",content:"123123123123123123123123123123123123123123123123123123123123123123123123123123123123123123123123",date:"123",icon:"react"}],onClick:n=>{console.log("click",n)}})]})]})}export{se as default};
